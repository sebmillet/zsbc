# tests/zsbc.test/02bc-50.exp

set timeout 3
spawn "$ZSBC" --SCM --numlib bc "$TESTDIR/libmath.b"
send_user "***   BC - libmath functions, scale 200\n"

set test "Function e()"
send "scale=200;print \":\",e(150),\":\";0\n"
expect {
	-re ":139370958066637969731834193714145747747369006140218438233756444835.\[^0-9\]+68081931010110893228070945910753082392875845339120017611802994603708\[^0-9\]+41158702331651502678524914559896494343694862747327299965336704617440\[^0-9\]+5929654520880927766779819574000784488439451556828328484270858227:0\[^0-9\]+" { pass "$test" }
	default { fail "$test" }
}

set test "Function l()"
send "print \":\",l(150),\":\";0\n"
expect {
	-re ":5.01063529409625575001399602483307755177419340072004014968067012607\[^0-9\]+92458906036192117397468379965099979299041161299596772755015349203380\[^0-9\]+0277735270585732976482763824961500611929367666644987293568348940623:\[^0-9\]+0\[^0-9\]+" { pass "$test" }
	default { fail "$test" }
}

set test "Function s()"
send "print \":\",s(150),\":\";0\n\n"
expect {
	-re ":-.71487642962916463143638609739662998937292172507126621479610892999\[^0-9\]+50633309233140223624548408702464705284428921946241168241619061468212\[^0-9\]+8680087402858638502137628586935227648227334055565804670491318538470:\[^0-9\]+0\[^0-9\]+" { pass "$test" }
	default { fail "$test" }
}

set test "Function c()"
send "print \":\",c(150),\":\";0\n"
expect {
	-re ":.699250806478375131416451618825528389491681761605507280244402923679\[^0-9\]+11829650319010740304381934525689524294774275588918152448161207749097\[^0-9\]+732135355331435004400994105559923809279786297990639427018698049337:0\[^0-9\]+" { pass "$test" }
	default { fail "$test" }
}

set test "Function a()"
send "print \":\",a(150),\":\";0\n"
expect {
	-re ":1.56412975889102839008217770413814601147636445846365082679204495406\[^0-9\]+87318958628630714696545577595189325388689109729856910512263337398741\[^0-9\]+3119380718229399264112977068907955848304626226752208631239861911151:\[^0-9\]+0\[^0-9\]+" { pass "$test" }
	default { fail "$test" }
}

set test "Function j()"
send "print \":\",j(150,160),\":\";0\n"
expect {
	-re ":.002043652985302359705469056304308430960084776518927567279073174880\[^0-9\]+16385271864788488513190708822447515150954910938752145813674653701327\[^0-9\]+255103500914807228650941461272664616629367725300516509805354482348:0\[^0-9\]+" { pass "$test" }
	default { fail "$test" }
}

set test "Checking object count ref is null"
send "quit\n"
expect {
	-re "OK.*number count.*should be 0.*: 0\[^0-9\]+OK.*expr_t.*count.*should be 0.*: 0\[^0-9\]+" { pass "$test" }
	default { fail "$test" }
}

